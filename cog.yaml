# Version: 1.0.1 - Enhanced alpha logging and np.maximum fix
build:
  gpu: true
  cuda: "12.1"
  python_version: "3.11.9"
  system_packages:
    - git
    - ffmpeg
    - libsm6
    - libxext6
    - libglib2.0-0
    - libgl1
    - build-essential
    - ninja-build
    - cmake
    - unzip
  run:
    - export CUDA_HOME=/usr/local/cuda
    - pip install --upgrade pip
    - pip install \
        "torch==2.4.0" \
        "torchvision==0.19.0" \
        "opencv-python>=4.9.0.80" \
        "diffusers==0.31.0" \
        "transformers>=4.49.0" \
        "tokenizers>=0.20.3" \
        "accelerate>=1.1.1" \
        "huggingface_hub>=0.24.0" \
        tqdm \
        imageio \
        easydict \
        ftfy \
        dashscope \
        imageio-ffmpeg \
        "gradio>=5.0.0" \
        "numpy>=1.23.5,<2" \
        "xfuser>=0.4.1"
    - "CUDA_HOME=/usr/local/cuda pip install --no-build-isolation flash-attn==2.6.1"

predict: "predict.py:Predictor"
